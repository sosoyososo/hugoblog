---
title: 'prometheus 简单理解和入门使用'
date: Fri, 29 May 2020 03:17:08 +0000
draft: false
tags: ['golang', '折腾', '瞎逼逼']
---

原理和使用
-----

prometheus 本质是一系列组件的集合，包括： 1. 一个时间序列数据库来存储数据， 2. 一些列的expotor从不同地方来搜集数据并提供数据接口， 3. 一个数据获取器来从exportor来获取数据存入数据库。 4. 一个webServer提供简单的数据看板UI； 5. 以及一些其他组件来丰富场景，比如内网环境无法对外提供接口，可以用pushgateway来主动把数据推送到数据库。 为了约定expotor和数据库的数据格式，prometheus抽象了四种数据模型，用于统计各种类型的数据，并使用METRIC格式进行数据交互。

Counter
-------

简单的计数器，只增不减；

Gauge
-----

数据曲线统计，增增减减；

Histogram
---------

对增增减减的数据，设定分界线进行分类。比如请求时间大于2S的，1-2s的，0.5~1的；

Summary
-------

在Histogram基础上，提供了每个分段上的总和信息，比如总次数，总时间之类；

更好地UI
-----

prometheus 默认提供的UI界面不是很友好，可以使用grafana来替换。添加源之后，自定义看板即可。