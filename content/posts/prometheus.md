---
title: 'Prometheus'
date: Fri, 15 May 2020 09:01:55 +0000
draft: false
tags: ['golang', '折腾', '瞎逼逼']
---

最近在找数据监控服务，架构设计提现审美的话，看到Prometheus的第一眼它就征服了我。简单讲一下，还没细看。

是什么？
----

是数据搜集平台，定期获取expotor搜集到的数据，存储到本地时序数据库中，并提供UI和查询语句作为借口进行展示。 周边有一些列已经比较成熟的expotor来进行数据监控，比如node\_expotor监控主机系统，mysql\_expotor监控mysql，golang\_client监控goapp等等。

使用
--

1.  安装
2.  配置target，然后启动。
3.  安装exportor，启动。exportor默认会搜集所有的常用数据。
4.  在Prometheus上直接查看数据。
5.  安装Grafana来作为UI看板，替换Prometheus提供更好地体验。

然后数据会自动搜集了。

### 高阶使用

1.  默认exportor暴露数据，Prometheus去请求，但可以使用已经提供的插件pushgateway,来让exportor主动把数据推送过来
2.  理解Prometheus默认提供的四种数据类型，自定义新的数据；
3.  Grafana中设置警告提醒；（钉钉、邮件、slack等多种提醒渠道）
4.  更深一层其实就是运维上对数据指标的设计了；

吸引我的点
-----

1.  他的架构提现了反全家桶的设计思路，具体实现上会是以一系列的组件来提供完整的服务，而不是以黑盒子提供所有可能的服务，然后都丢给用户去学习。
2.  时序数据库最完美符合监控数据的存储方式。
3.  只有一个可运行文件和对应配置文件，配置安装运行简单。最简单模式下，只需要下载之后，配置一个文件，运行即可；
4.  一经使用，即可达到通用监控水准，在此之上升级简单。