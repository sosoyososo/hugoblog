---
title: 'tomcat 加载 war 包的一个问题'
date: Sun, 18 Nov 2018 14:46:16 +0000
draft: false
tags: ['折腾', '瞎逼逼']
---

周末折腾了一下tomcat，本身对java不是很熟悉，导致走了很多弯路，但其中的一些想法和解决问题的思路，还是值得记录和分享一下。 问题：加载了新的war包之后，service api一直报404。

1.  看了tomcat发布war包的流程，就是简单的把war包丢过去，到一个指定目录下就好了。
2.  发现tomcat其实默认是做了解包的动作的，看了一下也解包成功了，那war包本身应该没有损坏。
3.  发现tomcat里面其实有其他几个默认工程的，试了一下里面的service api是可用的，那tomcat本身也没问题。最有可能是相关配置出问题了，这也是当时的想法。其实之前这样的配置有发布过，但我不确定是不是有改动。
4.  这一步花费相当多时间，去网上找相关的配置，但其实大家都差不多，甚至完全一样的，做了许多无用功，最终也没有验证到配置问题，反倒对tomcat配置更了解了点，后面都是用tomcat的gui-manage进行来发。
5.  过了很久才开始怀疑是不是war包本身有问题，这时候还不知道war包就是一个压缩结构，只想着去看tomcat这个更复杂的东西，感觉这个出问题的几率更大，这个真的很不应该。
6.  这时候想到的是做一个跟之前war包完全一致的简单工程，打出一个war包，进行验证。这一步也花费了一个不短的时间，之后因为看教程做工程，之后配置本地的jetty时候网速有点慢，也因为时间太晚，就不了了之。
7.  第二天早上，脑子清醒后，就迅速决定着了个已经可以运行的war包，拿来试了一下发现没问题。就排除了tomcat本身以及配置的问题，只可能是war包问题了。
8.  之后对比了自己拿到的war包和正常运行的war包，结合之前搜索以及配置的经验，迅速判定是war包结构问题。

回顾整个过程，发现自己定位问题的能力还是有点弱，其实可能有的问题只有两个，tomcat和war。解决问题的基本思路其实是缩小产生问题的原因的范围，自我感觉这个用的还行。这里学到另外一点，避重就轻。就是说在缩小范围的时候，某些问题很难验证，或者说代价比较高的时候，就该迅速转向的，而非死磕。 另外一个比较正要的是，在解决问题的时候，对于问题发生的组成部分一定要有所了解，这次的根本原因其实在于对war包根本就没有去了解，也没有放在心上，所以它狠狠的教训了我。整个周日精神状态都不是很好。