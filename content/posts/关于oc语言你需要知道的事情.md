---
title: '关于OC语言你需要知道的事情'
date: Thu, 18 Dec 2014 05:09:31 +0000
draft: false
tags: ['Read Note']
---

这是我对OC语言本身的一次回顾，熟悉的人直接跳过。 Objective-C的程序文件包括.h头文件,.m源文件，.mm混合C++代码的源文件。 **Objective-C是C语言的超集** 这意味着所有平台无关的C代码可不经修改直接用在Objective-C中，你拥有了C的很强的底蕴。 **Objective-C是面向对象的语言** 你可以使用类，实例，方法，属性来架构你的程序，而不必使用struct和操作struct的函数来模拟面向对象 **Objective-C内置很多便捷操作** OC内建了很多类来进行常用的操作，这保存在Fundation framework中，在你想要自己实现某种功能的时候，看一下OC是否已经帮你实现了。 **Objective-C是动态语言** 你可以在程序运行的时候动态的获取关于类和实例的一切信息，属性，方法。 动态的修改语言相关的很多东西，比如修改类以及类实例的方法列表，甚至替换默认的方法实现，修改方法传递链。可以使用runtime进行操作 **Objective-C可以跟C/C++无缝结合** 平台无关的C++代码可以在Objective-C文件中使用，这时候叫做Objective-C++,这时候你唯一需要做的是把OC的.m文件后缀改成.mm表明对C++的支持。 **Category** 你可以使用它来扩展别人(或者自己)已经实现的类，为它增加类方法或者实例方法。 **Protocol** 定义一个你要求别人实现的方法列表，遵守你的协议的实例，需要根据你的要求有选择的实现你方法列表中的方法 **target-action模式** 在OC中广泛使用这种方式来在为一个实例增加观察者，当被观察实例发生某种改变或者某件相关事件的时候，调用target实例的action对应的方法。使用UIButton的addTarget:action:forControlEvents:方法监控UIButton的点击事件。 **KVO/KVC** KVO(key-value-observing)是target-action模式的一种延伸应用，定义了一种方法来对实例的改变进行监控,kvc(key-value-coding)定义了一个可以被KVO的类所要遵循的协议。 **ARC/NARC** OC的内存管理是使用一种被称为RC(reference count)的技术，创建一个实例，或者强引用一个实例的时候这个实例的reference count 引用计数加一，引用生命周期结束，计数减一。当计数减到0的时候，对象被销毁。 注意循环引用或者间接的循环引用导致的内存永远不释放，这个需要在编码的时候自行进行避免。 新的OC支持使用ARC(auto reference count--自动引用计数)的技术，编译器会代替你在编译的时候自动的插入对引用计数的操作，比如适当的release之类的。 在同一个工程中，你可以在文件粒度上决定是否适用ARC。 内存管理是语言的基础也是核心部分，请务必精通。google关键字-fno-objc-arc和-fobjc-arc ，以及查看官方文档Transitioning to ARC Release Notes查看更详细的信息。 **异常处理** throw产生异常 try尝试捕获异常 catch捕获异常 NSException被throw抛出被catch截获，并处理。 NSSetUncaughtExceptionHandler来设置对任何没有被捕获的exception处理方法 **多线程** 多线程经常用到的技术GCD/NSOperation/NSThread/,暂时的使用推荐GCD,构建异步框架推荐NSoperation,不推荐使用NSThread,除非你是在做实时性非常强的应用，比如视频解析。 事件处理用runloop **Block** Block是将代码片段和代码片段所使用的上下文保存起来，作为参数传给方法使用，或者作为属性保存起来以备后用的技术。这个技术的出现大大增加了代码可读性，减少了相同逻辑代码的数量和逻辑，当然也减少了bug。强烈推荐使用。 Block是C层面的技术，跟Block相关的是Block跟OC代码交互时候的内存管理，有点复杂，但很值。 **Summary** 嗯，终于概括完了，但你以为这样就可以开发出一款优秀的app了？Too young！有了以上的知识，你只能写出像是hello world/冒泡排序这类的纯技术的内容，而大部分跟实际开发相关的SDK相关的，其他语言相关的，dev tool相关的内容都没有涉及～ 但又不能说这样的总结毫无意义，因为这会让你在解决某个问题的时候至少知道都有一些什么东西提供给你来帮助你减少你的工作量。